<Project>
    <Target Name="GenerateBuildInfo" BeforeTargets="BeforeCompile">
        <MakeDir Directories="$(MSBuildProjectDirectory)\Generated"/>

        <!-- Build lines individually. Use %3B to emit literal semicolons. -->
        <ItemGroup>
            <_BuildInfo Include="// &lt;auto-generated /&gt;"/>
            <_BuildInfo Include="// This file is generated by static_version_generator.targets. Do not edit manually."/>
            <_BuildInfo Include="// ReSharper disable ArrangeNamespaceBody"/>
            <_BuildInfo Include="// ReSharper disable NamespaceStyle"/>
            <!-- Use a single-space line instead of empty Include -->
            <_BuildInfo Include=" "/>
            <_BuildInfo Include="namespace ValheimVehicles.SharedScripts"/>
            <_BuildInfo Include="{"/>
            <_BuildInfo Include="    internal static class BuildInfo"/>
            <_BuildInfo Include="    {"/>
            <_BuildInfo Include="        public const string Version         = &quot;$(Version)&quot;%3B"/>
            <_BuildInfo Include="        public const string AssemblyVersion = &quot;$(AssemblyVersion)&quot;%3B"/>
            <_BuildInfo Include="        public const string FileVersion     = &quot;$(FileVersion)&quot;%3B"/>
            <_BuildInfo Include="        public const string PackageVersion  = &quot;$(PackageVersion)&quot;%3B"/>
            <_BuildInfo Include="    }"/>
            <_BuildInfo Include="}"/>
        </ItemGroup>

        <WriteLinesToFile
                File="$(MSBuildProjectDirectory)\Generated\BuildInfo.g.cs"
                Lines="@(_BuildInfo)"
                Overwrite="true"
                WriteOnlyWhenDifferent="true"/>

        <ItemGroup>
            <Compile Include="$(MSBuildProjectDirectory)\Generated\BuildInfo.g.cs"/>
        </ItemGroup>
    </Target>
</Project>
