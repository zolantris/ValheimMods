<Project>
    <PropertyGroup Condition="!Exists('$(SolutionDir)build\.props')">
        <BepInExPath>$(SolutionDir)libs</BepInExPath>
        <ManagedDataPath>$(SolutionDir)libs</ManagedDataPath>
    </PropertyGroup>

    <PropertyGroup Condition="'$(IsDebug)' == 'true'">
        <DefineConstants>$(DefineConstants);VALHEIM</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition="'$(IsRelease)' == 'true'">
        <OutputPath>bin\Release\</OutputPath>
        <DefineConstants>$(DefineConstants);VALHEIM</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Label="VM properties">
        <SandboxieVMExists Condition="Exists('$(SandboxiePluginDeployPath)')">true</SandboxieVMExists>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Test|AnyCPU' ">
        <OutputPath>bin\Test\</OutputPath>
    </PropertyGroup>

    <!--  disables cache which can prevent building or running stuff  -->
    <PropertyGroup>
        <DisableFastUpToDateCheck>True</DisableFastUpToDateCheck>
    </PropertyGroup>

    <!--  Required for vehicle serialization/storage  -->
    <ItemGroup>
        <Reference Include="Newtonsoft.Json" Version="13.0.3">
            <HintPath>$(SolutionDir)\Dependencies\Newtonsoft.Json.dll</HintPath>
        </Reference>
    </ItemGroup>

    <!-- Required for vehicle syncing (lots of players not using bepinex config manager)   -->
    <ItemGroup>
        <Reference Include="ServerSync" Version="1.19.0">
            <HintPath>$(SolutionDir)\Dependencies\ServerSync.dll</HintPath>
        </Reference>
    </ItemGroup>

    <!-- Automatic publicize game libs -->
    <ItemGroup>
        <PackageReference Include="Krafs.Publicizer" Version="2.2.1">
            <PrivateAssets>all</PrivateAssets>
            <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
        </PackageReference>
    </ItemGroup>
    <PropertyGroup>
        <PublicizerClearCacheOnClean>true</PublicizerClearCacheOnClean>
        <PublicizerLogFilePath>.\Logs\publicizer.txt</PublicizerLogFilePath>
    </PropertyGroup>

    <!-- Add BepInEx references -->
    <Import Project="$(SolutionDir)build\bepinex_libs.props"/>

    <!-- Add valheim_data references -->
    <ItemGroup Label="Valheim_Data">
        <Publicize Include="assembly_valheim"/>
        <Reference Include="assembly_valheim">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_valheim.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="SPlatform">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\SPlatform.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="SPlatform.Steam">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\SPlatform.Steam.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="assembly_googleanalytics">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_googleanalytics.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="assembly_guiutils">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_guiutils.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <!--   Might be deprecated/removed. This only is brought in if it's discovered     -->
        <Reference Condition="Exists('$(ManagedDataPath)\assembly_steamworks.dll')" Include="ui_lib">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\ui_lib.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="assembly_postprocessing">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_postprocessing.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Condition="Exists('$(ManagedDataPath)\assembly_steamworks.dll')" Include="assembly_steamworks">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_steamworks.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="assembly_sunshafts">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_sunshafts.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Reference Include="assembly_utils">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(ManagedDataPath)\assembly_utils.dll</HintPath>
            <Private>False</Private>
        </Reference>
    </ItemGroup>

    <ItemGroup Label="Csharp-Libs">
        <Reference Include="System"/>
        <Reference Include="System.Core"/>
        <!--        <Reference Include="System.Collections.Immutable"/>-->
    </ItemGroup>

    <!--  UnityLibs  -->
    <Import Project="$(SolutionDir)build\unity_libs_2022.props"/>

    <ItemGroup Label="required-mods">
        <Reference Include="Jotunn">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(SolutionDir)libs\Jotunn.dll</HintPath>
            <Private>False</Private>
        </Reference>
    </ItemGroup>

    <!-- Patches for community mods -->
    <!-- Todo this may be moved direcly into repos that require this mod -->
    <ItemGroup Label="Community Mod Patches">
        <Publicize Include="PlanBuild"/>
        <Reference Include="PlanBuild">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(SolutionDir)libs\PlanBuild.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Publicize Include="Advize_PlantEasily"/>
        <Reference Include="Advize_PlantEasily">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(SolutionDir)libs\Advize_PlantEasily.dll</HintPath>
            <Private>False</Private>
        </Reference>
        <Publicize Include="ComfyGizmo"/>
        <Reference Include="ComfyGizmo">
            <SpecificVersion>False</SpecificVersion>
            <HintPath>$(SolutionDir)libs\ComfyGizmo.dll</HintPath>
            <Private>False</Private>
        </Reference>
    </ItemGroup>
</Project>